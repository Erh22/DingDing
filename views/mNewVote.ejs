<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <script src="/javascript/jquery-3.5.1.min.js"></script>
    <script src="/javascript/popper.min.js"></script>
    <script src="/javascript//bootstrap.min.js"></script>
    <script src="/javascript/vue.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/fontello.css">
    <link rel="stylesheet" href="/stylesheets/sider.css">
    <link rel="stylesheet" href="/stylesheets/member.css">

    <title>Document</title>
    <style>
        .dblock {
            height: calc(100vh - 186px);
        }
    </style>
</head>

<body>

    <!-- 左邊sider -->
    <div class="slider fixed-top">
        <img src="/image/LOGO.png" class="sliderLogo">
        <br>
        <img src="/image/photo.jpg" class="sliderPhoto">
        <p class="name text24B">阿信</p>
        <div class="menu text24R">
            <a href=""><i class="icon-home"></i>首頁</a>
            <a href="" class="act"><i class="icon-claendar"></i>訂訂行事曆</a>
            <a href="" class="mb-2"><i class="icon-member"></i>會員中心<i class="icon-down-open ml-3 mr-0"
                    style="font-size: 14px;"></i></a>
            <span class="menuI d-none">
                <a href="" class="mb-0">個人資料</a>
                <a href="">我的訂訂幣</a>
            </span>
            <a href="" class="mt-4"><i class="icon-message"></i>通知<span class="note">3</span></a>
            <a href="" id="signOut"><i class="icon-logout"></i>登出</a>
        </div>
    </div>

    <!-- 右邊內容放置區 -->
    <div class="containerRight">
        <div class="inWrapper">
            <!-- 上方頁籤 -->
            <div class="topBtnGroup topBtnPadding">
                <button class="text20R dbtn btnGY">訂訂行事曆</button>
                <button class="text20R dbtn btnGY">我的團體</button>
                <button class="text20R dbtn btnGY">我的訂單</button>
                <button class="text20R dbtn btnGB btnB">我的投票</button>
            </div>
            <!-- 內容區塊 -->
            <div id="app" class="dblock givePadding mt-m">
                <!-- 內容按鈕 -->
                <div class="clearfix">
                    <button class="text20RG dbtn btnG"><i class="icon-left-open mr-2"></i>返回</button>
                    <button @click="saveNewVoteData" class="text20R dbtn btnB float-right">下一步</button>
                </div>
                <!-- 上方內容 -->
                <div class="mt-l ml-4">
                    <div class="row mb-s">
                        <div class="col-2 mTD">
                            <span class="text20B">選擇團體</span>
                        </div>
                        <div class="dSelect pr-4" style="width: 500px;">
                            <!-- <input v-model="groupName" type="text" class="text20RG singleText398"
                                placeholder="選擇團體"> -->
                            <select v-model="newVoteData.groupID" name="" id="" class="text20RG singleText398 w-100"
                                placeholder="選擇團體">
                                <option v-for="(group,index) in groupList" class="text20RG singleText398"
                                    :value="group.groupID">
                                    {{group.groupName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-s">
                        <div class="col-2 mTD">
                            <span class="text20B">投票標題</span>
                        </div>
                        <div class="dSelect" style="width: 500px;">
                            <input v-model="newVoteData.voteName" type="text" name="" id=""
                                class="text20RG singleText398 w-100" placeholder="輸入標題">
                            </input>
                        </div>
                    </div>
                    <div class="row mb-s">
                        <div class="col-2 mTD">
                            <span class="text20B">票數選項</span>
                        </div>
                        <div class="dSelect pr-4" style="width: 500px;">
                            <select v-model="newVoteData.multipleSelect" name="" id=""
                                class="text20RG singleText398 w-100" placeholder="選擇票數選項">
                                <option class="text20RG singleText398" value="false">一人一票</option>
                                <option class="text20RG singleText398" value="true">一人多票</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-s">
                        <div class="col-2 mTD">
                            <span class="text20B">預定訂單時間</span>
                        </div>
                        <div class="dSelect" style="width: 500px;">
                            <input v-model="newVoteData.scheduledOrderTime" type="datetime-local"
                                class="text20RG singleText398 w-100" placeholder="選擇日期時間">
                        </div>
                    </div>
                    <div class="row mb-s">
                        <div class="col-2 mTD">
                            <span class="text20B">投票截止時間</span>
                        </div>
                        <div class="dSelect" style="width: 500px;">
                            <input v-model="newVoteData.voteDeadline" type="datetime-local"
                                class="text20RG singleText398 w-100" placeholder="選擇日期時間">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let app = new Vue({
            el: "#app",
            data: {
                groupList: JSON.parse('<%- groupList %>'),
                newVoteData: {
                    groupID: "",
                    voteName: "",
                    scheduledOrderTime: "",
                    voteDeadline: "",
                    multipleSelect: "",
                }

            },
            methods: {
                saveNewVoteData: function () {
                        fetch('mNewVote/saveNewVoteData', {
                            method: 'POST',
                            body: JSON.stringify(this.newVoteData),
                            headers: new Headers({
                                'Content-Type': 'application/json'
                            })
                        }).then((myJson) => {
                                // console.log(myJson);
                                location.href = "/mNewVote_2";
                            });
                }
            }
        })
    </script>

</body>

</html>