<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <script src="/javascript/jquery-3.5.1.min.js"></script>
    <script src="/javascript/popper.min.js"></script>
    <script src="/javascript//bootstrap.min.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/fontello.css">
    <link rel="stylesheet" href="/stylesheets/sider.css">
    <link rel="stylesheet" href="/stylesheets/notice.css">
    <link rel="stylesheet" href="/stylesheets/sEvaluation.css">
    <script src="/javascript/vue.js"></script>

    <title>Document</title>


</head>

<body>
    <!-- 左邊sider -->
    <div class="slider fixed-top">
        <img src="/image/LOGO.png" class="sliderLogo">
        <br>
        <img src="/image/photo.jpg" class="sliderPhoto">
        <p class="name text24B">尊品原汁牛肉麵</p>
        <div class="menu text24R ">

            <a href="" class=""><i class="icon-order"></i>訂單管理</a>
            <a href=""><i class="icon-menu"></i>餐點清單</a>
            <a href=""><i class="icon-statistics"></i>營運統計</a>
            <a href="" class="act"><i class="icon-evaluation"></i>店家評價</a>
            <a href="sNotice"><i class="icon-message "></i>通知<span class="note">3</span></a>
            <a href=""><i class="icon-about"></i>店家資訊</a>
            <a href="" id="signOut"><i class="icon-logout"></i>登出</a>
        </div>
    </div>

    <div class="containerRight">
        <!-- 右邊內容放置區 -->
        <nav class="topTag title row inWrapper position-sticky mb-m" id='store'>
            <span class="eng24R">{{average}}</span>
            <span class="star">
                <i :class="average>=1 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                <i :class="average>=2 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                <i :class="average>=3 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                <i :class="average>=4 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                <i :class="average==5 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                
            </span>
            <span class="text24B">店家評價({{commentTotle}})</span>
            <div class="achieve text20R  ml-auto">訂單完成率 {{completionRate}}%</div>
        </nav>

        <ul class="evaluationList scrollList" id="evaluationList">
            <li class="dblock d-flex" v-for='item in comment'>
                <!-- <span class="photo"></span> -->
                <img :src="(`/image/${item.memberPhoto}`)">
                <span class="content">
                    <h2 class="text24B">{{item.memberName}}</h2>
                    <div class="star">
                        <i :class="item.commentScore>=1 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                        <i :class="item.commentScore>=2 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                        <i :class="item.commentScore>=3 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                        <i :class="item.commentScore>=4 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                        <i :class="item.commentScore==5 ? 'icon-spoon' : 'icon-borderspoon'"></i>
                       
                    </div>
                    <p class="text20R">{{item.commentContent}}</p>
                    <p class="text16">{{item.commentTime}}</p>
                </span>
            </li>
        </ul>
    </div>

    <!-- vue -->
    <script>
        // data資料
        let data = {
            comment: [{
                commentID: 0,
                memberName: '王小華',
                commentContent: '上次訂餐非常準時地送到了，用完餐當天的熱暑也退得差不多了，是一次很棒的用餐體驗，下次會繼續訂訂！',
                commentScore: 4,
                commentTime: getDate("2020/08/02 18:00"),
                memberPhoto: 'photo.jpg',
            }, {
                commentID: 1,
                memberName: '陳大明',
                commentContent: '每次不知道吃什麼的時候就會想到要吃摩斯，穩定的品質讓人吃得很放心，安心的食材把關讓人覺得開心以後會持續訂訂！',
                commentScore: 5,
                commentTime: getDate("2020/08/02 12:00"),
                memberPhoto: 'photo.jpg',
            }],

            commentTotle: 82,
            average: 4.8,
            completionRate: 87



        }

        //vue資料
        let mMember = new Vue({
            el: '#evaluationList',
            data: data
        })

        // 店家
        let store = new Vue({
            el: '#store',
            data: data
        })




        // 時間換算
        function getDate(dateTimeStamp) {

            var minute = 1000 * 60;
            var hour = minute * 60;
            var day = hour * 24;
            var halfamonth = day * 15;
            var month = day * 30;

            var sTime = new Date(dateTimeStamp).getTime(); //把時間轉為時間戳
            var now = new Date().getTime(); //當前時間
            var diffValue = now - sTime;
            var monthC = diffValue / month;
            var weekC = diffValue / (7 * day);
            var dayC = diffValue / day;
            var hourC = diffValue / hour;
            var minC = diffValue / minute;
            console.log(diffValue);
            if (monthC >= 12) {
                return dateTimeStamp
            } else if (monthC >= 1) {
                return parseInt(monthC) + "個月前"
            } else if (weekC >= 1) {
                return parseInt(weekC) + "周前"
            } else if (dayC >= 1) {
                return parseInt(dayC) + "天前"
            } else if (hourC >= 1) {
                return parseInt(hourC) + "小時前"
            } else if (minC >= 1) {
                return parseInt(minC) + "分鐘前"
            } else {
                return "剛剛"
            }

        }
    </script>
</body>

</html>