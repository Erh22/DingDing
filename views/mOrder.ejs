<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <script src="/javascript/jquery-3.5.1.min.js"></script>
    <script src="/javascript/popper.min.js"></script>
    <script src="/javascript//bootstrap.min.js"></script>
    <script src="/javascript/vue.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/fontello.css">
    <link rel="stylesheet" href="/stylesheets/sider.css">
    <link rel="stylesheet" href="/stylesheets/member.css">

    <title>Document</title>
    <style>
        .dblock {
            height: calc(100vh - 186px);
        }
    </style>

</head>

<body>
    <!-- 左邊sider -->
    <div class="slider fixed-top">
        <img src="/image/LOGO.png" class="sliderLogo">
        <br>
        <img src="/image/photo.jpg" class="sliderPhoto">
        <p class="name text24B">阿信</p>
        <div class="menu text24R">
            <a href=""><i class="icon-home"></i>首頁</a>
            <a href="" class="act"><i class="icon-claendar"></i>訂訂行事曆</a>
            <a href="" class="mb-2"><i class="icon-member"></i>會員中心<i class="icon-down-open ml-3 mr-0"
                    style="font-size: 14px;"></i></a>
            <span class="menuI d-none">
                <a href="" class="mb-0">個人資料</a>
                <a href="">我的訂訂幣</a>
            </span>
            <a href="" class="mt-4"><i class="icon-message"></i>通知<span class="note">3</span></a>
            <a href="" id="signOut"><i class="icon-logout"></i>登出</a>
        </div>
    </div>

    <!-- 右邊內容放置區 -->
    <div id="app" class="containerRight">
        <div class="inWrapper">
            <!-- 上方頁籤 -->
            <div class="topBtnGroup topBtnPadding">
                <button class="text20R dbtn btnGY">訂訂行事曆</button>
                <button class="text20R dbtn btnGY">我的團體</button>
                <button class="text20R dbtn btnGY btnY">我的訂單</button>
                <button class="text20R dbtn btnGB">我的投票</button>
            </div>
            <!-- 內容區塊 -->
            <div class="dblock givePadding mt-m">
                <!-- 內容按鈕 -->
                <div class="clearfix mb-s">
                    <button class="text20RG dbtn btnG"><i class="icon-left-open mr-2"></i>返回</button>
                    <button class="text20R dbtn btnY float-right" data-toggle="modal"
                        data-target="#comfirmOrder">確認點餐</button>
                    <button class="text20R dbtn btnR float-right mr-3" data-toggle="modal"
                        data-target="#deleteOrder">刪除訂單</button>
                </div>
                <!-- 捲軸範圍 -->
                <div class="scrollList orderVoteListL">
                    <!-- 上方內容 -->
                    <div class="ml-4">
                        <div class="row mb-s mTD">
                            <div class="col-2">
                                <span class="text20B">團名名稱</span>
                            </div>
                            <div class="col-10">
                                <span class="text20B ">{{groupName}}</span>
                            </div>
                        </div>
                        <div class="row mb-s mTD">
                            <div class="col-2">
                                <span class="text20B">餐點送達時間</span>
                            </div>
                            <div class="col-10">
                                <span class="text20B">{{orderArrivedTime}}</span>
                            </div>
                        </div>
                        <div class="row mb-s mTD">
                            <div class="col-2">
                                <span class="text20B">點餐截止時間</span>
                            </div>
                            <div class="col-10">
                                <span class="text20B textR">{{orderDeadline}}</span>
                            </div>
                        </div>
                    </div>

                    <!-- 中間顯示區 -->
                    <div class="orderSection">
                        <div class="orderSectionInner mt-s ml-4">
                            <div class="row orderSectionMTD">
                                <div class="col-7">
                                    <img :src="storeList[selectedStore].storePhoto" alt=""
                                        class="float-left orderSectionImg clipCircle mr-3">
                                    <span class="text24B">{{storeList[selectedStore].storeName}}</span>
                                </div>
                                <div class="col-3 text-right pr-3">
                                    <span class="text20B">已選擇<span
                                            class="eng20R textY mr-3 ml-3">{{totalQuality}}</span>項餐點</span>
                                </div>
                                <div class="col-2 text-right pr-4">
                                    <span class="text20B">總金額 <span class="eng20R price">
                                            <span class=" align-middle">{{total}}</span>
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="mTD">
                                <a href="#" class="text20R text-decoration-none pr-3 textB">店家推薦</a><span
                                    class="textG">|</span>
                                <a href="#" class="text20R text-decoration-none pr-3 pl-3">人氣餐點</a><span
                                    class="textG">|</span>
                                <a href="#" class="text20R text-decoration-none pr-3 pl-3">套餐</a><span
                                    class="textG">|</span>
                                <a href="#" class="text20R text-decoration-none pr-3 pl-3">套餐</a><span
                                    class="textG">|</span>
                                <a href="#" class="text20R text-decoration-none pr-3 pl-3">飲品</a>
                            </div>
                        </div>
                    </div>

                    <!-- 下方點餐區 -->
                    <div class="mt-4 ml-4 pt-1">
                        <div class="row mb-n1 orderSectionMTD">
                            <div v-for="(product,index) in productList" class="col-6 itemBorder orderProductItem mb-4">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img :src="productList[index].productPhoto" alt="" class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        {{product.productName}}
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">{{product.productPrice}}</span>
                                        </span>

                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i @click="if(product.quality>0){product.quality--}" class="icon-minus"></i>
                                        <p class="eng20R text-center">{{product.quality}}</p>
                                        <i @click="product.quality++" class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="row mb-n1 orderSectionMTD">
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>

                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>
                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-n1 orderSectionMTD">
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>

                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>
                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-n1 orderSectionMTD">
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>

                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 itemBorder orderProductItem ">
                                <div class="row align-items-center">
                                    <div class="col-2">
                                        <img src="/image/store/Taichung/肯德基KFC_台中公益/咔啦雞腿堡.jpeg" alt=""
                                            class="itemImg">
                                    </div>
                                    <div class="col-4 text20B pl-2">
                                        咔啦雞腿堡
                                    </div>
                                    <div class="col-3">
                                        <span class="eng20R price">
                                            <span class=" align-middle">60</span>
                                        </span>
                                    </div>
                                    <div class="col-3 countP ml-n4">
                                        <i class="icon-minus"></i>
                                        <p class="eng20R text-center">0</p>
                                        <i class="icon-plus"></i>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                    </div>
                </div>
            </div>
        </div>


        <!-- 刪除訂單彈跳框 -->
        <div class="modal fade sm2Btn" id="deleteOrder">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B">是否要刪除訂單</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <i class=" icon-close"></i>
                        </button>
                    </div>
                    <p class="modal-body text24R">
                        刪除訂單後，其他團員的點餐也將一併被
                        <span class="redColor">取消餐點
                        </span>，並退還全額。
                    </p>
                    <div class="modal-footer">
                        <button class="text20R dbtn btnW" data-dismiss="modal">返回離開</button>
                        <button class="text20R dbtn btnR ml-3">刪除訂單</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 刪除完成彈跳框 -->
        <button type="button" class="btnR dbtn" data-toggle="modal" data-target="#DeleteSuccess">
            刪除訂單
        </button>
        <div class="modal fade sm1Btn" id="DeleteSuccess">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B w-100 text-center ">訂單已被刪除</h5>
                    </div>

                    <div class="modal-footer">
                        <button class="text20R dbtn btnY m-auto">確定</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 檢查餐點彈跳框 -->
        <div class="modal fade m2Btn" id="comfirmOrder">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B">請確認餐點</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <i class=" icon-close"></i>
                        </button>
                    </div>
                    <div class="orderProductItemList text20B">
                        <div class="scrollList orderVoteList">
                            <div v-for="(product,index) in fitlterProductList" class="d-flex justify-content-between orderProductItem mb-2">
                                <div>
                                    <img :src="product.productPhoto" alt="" class="itemImg">
                                    <span class="pl-2">
                                        {{product.productName}}
                                    </span>
                                </div>
                                <div>
                                    <span class="eng20R price">
                                    <span class="align-middle">{{product.productPrice}}</span>
                                    </span>
                                </div>
                                <div>
                                    <span class="eng20R align-middle productQuantity pr-5">{{product.quality}}</span>
                                </div>
                            </div>
                        </div>
                        <p class="text-right" style="border-top:solid 2px var(--dBlack);">
                            <span class="text20B">總金額
                                <span class="eng20R price">
                                    <span class="align-middle">{{total}}</span>
                                </span>
                            </span>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button class="text20R dbtn btnW" data-dismiss="modal">取消返回</button>
                        <a href="mOrderList"><button class="text20R dbtn btnY ml-3">完成訂單</button></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 點餐完成彈跳框 -->
        <button type="button" class="btnY dbtn" data-toggle="modal" data-target="#orderSuccess">
            點餐成功
        </button>
        <div class="modal fade sm1Btn" id="orderSuccess">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B w-100 text-center ">點餐成功</h5>
                    </div>

                    <div class="modal-footer">
                        <button class="text20R dbtn btnY m-auto">確定</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 取消點餐彈跳框 -->
        <button type="button" class="btnR dbtn" data-toggle="modal" data-target="#cancelOrder">
            取消點餐
        </button>
        <div class="modal fade sm2Btn" id="cancelOrder">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B">是否要取消點餐</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <i class=" icon-close"></i>
                        </button>
                    </div>
                    <p class="modal-body text24R">
                        取消點餐後，我們將會退還全額
                    </p>
                    <div class="modal-footer">
                        <button class="text20R dbtn btnW" data-dismiss="modal">取消離開</button>
                        <button class="text20R dbtn btnY ml-3">取消點餐</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 訂單成立彈跳框 -->
        <button type="button" class="btnY dbtn" data-toggle="modal" data-target="#createOrderSuccess">
            訂單成立
        </button>
        <div class="modal fade sm1Btn" id="createOrderSuccess">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B w-100 text-center ">建立訂單成功</h5>
                    </div>

                    <div class="modal-footer">
                        <button class="text20R dbtn btnY m-auto">確定</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 評價彈跳框-->
        <button type="button" class="btnY dbtn" data-toggle="modal" data-target="#makeComment">
            評價
        </button>
        <div class="modal fade inputL" id="makeComment">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text28B">麥當勞五權西店麥當勞</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <i class=" icon-close"></i>
                        </button>
                    </div>
                    <div class="modal-continer">
                        <p class="text24B mb-m textY" style="font-size: 1.6rem;">
                            <i class="mr-1 icon-spoon"></i>
                            <i class="mr-1 icon-spoon"></i>
                            <i class="mr-1 icon-spoon"></i>
                            <i class="mr-1 icon-spoon"></i>
                            <i class="mr-1 icon-borderspoon"></i>
                        </p>
                        <p class="text24B ">
                            評價
                        </p>
                        <textarea class="text20RG multiText398 mt-2 mb-m" placeholder="請輸入您對這次的訂購體驗"
                            style="width: 380px;"></textarea>
                        <button class="text20R dbtn btnY w-100">張貼評價</button>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
        <script src="/javascript/data.js"></script>
        </div>
        <script>
            let app = new Vue({
                el: "#app",
                data: data,
                mounted() {
                    if (localStorage.groupName) {
                        this.groupName = localStorage.groupName;
                    }
                },
                computed: {
                    totalQuality: function () {
                        let sum = 0;
                        this.productList.forEach(product => {
                            sum = sum + product.quality
                        });
                        return sum;
                    },
                    total: function () {
                        let sum = 0;
                        this.productList.forEach(product => {
                            sum = sum + (product.quality * product.productPrice)

                        });
                        return sum.toLocaleString('en-US');
                    },
                    fitlterProductList:function(){
                        return this.productList.filter(product=>product.quality > 0)
                    }
                },
                // methods: {

                // },
                // watch: {

                // }
            })
        </script>

</body>

</html>